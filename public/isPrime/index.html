<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simple template</title>
  </head>
  <body>
    <h1>WebAssembly playground</h1>
    <script src="isPrime.js"></script>
    <script>
      const isPrime = num => {
        for(let i = 2; i < num; i++) {
          if(num % i === 0) {
            return false;
          }
        }

        return num !== 0 && num !== 1;
      };

      const testPerf = (iterations, callback, fctName) => {
        const t1 = performance.now();
          for(let i = 0; i < iterations; i++) {
            callback(i);
        }
        const perfTime = performance.now() - t1;
        console.log(`${fctName} for ${iterations} iterations : ${Math.round(perfTime)/1000} s`);
      }

      Module['onRuntimeInitialized'] = () => {   
        const iterations = 10000
        testPerf(iterations, isPrime, "JS isPrime");
        testPerf(iterations, _isPrime, "WA isPrime");
      }
    </script>
  </body>
</html>